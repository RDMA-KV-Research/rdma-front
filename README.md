# Redis 性能测试工具

一个功能强大的 Redis 性能基准测试工具，提供 Web 界面进行 Redis 性能测试并实时展示各种性能指标。

## ✨ 功能特点

- 🎯 **Web 界面操作** - 友好的浏览器界面，无需命令行操作
- 📊 **实时性能监控** - 实时显示吞吐量、延迟、成功率等关键指标
- 📈 **可视化图表** - 动态图表展示性能趋势
- 🔧 **多种操作测试** - 支持 SET、GET、HSET、HGET 等 Redis 操作
- ⚡ **并发测试** - 可配置并发连接数进行压力测试
- 📝 **详细报告** - 提供包含 P50/P95/P99 延迟的详细测试报告
- 🌐 **WebSocket 通信** - 实时数据传输，无需刷新页面

## 🚀 快速开始

### 环境要求

- Node.js 14.0 或更高版本
- npm 或 yarn
- Redis 服务器

### 安装依赖

```bash
npm install
```

### 启动应用

```bash
npm start
```

或者在开发模式下运行：

```bash
npm run dev
```

### 访问应用

打开浏览器，访问 http://localhost:3000

## 📖 使用说明

### 1. 配置 Redis 连接

在 Web 界面的左侧配置面板中设置：

- **主机地址**: Redis 服务器地址 (默认: localhost)
- **端口**: Redis 服务器端口 (默认: 6379)
- **密码**: 如果 Redis 设置了密码认证
- **数据库**: Redis 数据库编号 (0-15)

### 2. 配置测试参数

- **测试时长**: 测试运行的时间 (1-300秒)
- **并发数**: 同时连接的客户端数量 (1-1000)
- **键长度**: 测试键的字节长度
- **值大小**: 测试值的字节大小

### 3. 选择操作类型

选择要测试的 Redis 操作：

- **SET**: 字符串设置操作
- **GET**: 字符串获取操作  
- **HSET**: 哈希字段设置操作
- **HGET**: 哈希字段获取操作

### 4. 开始测试

点击 "开始测试" 按钮启动性能测试。测试过程中可以：

- 实时查看性能指标
- 监控测试进度
- 查看操作日志
- 观察性能图表变化

### 5. 查看结果

测试完成后会显示：

- **测试汇总**: 总体统计信息
- **详细结果**: 每种操作的详细性能数据
- **性能图表**: 吞吐量和延迟的时间序列图
- **测试日志**: 完整的测试过程日志

## 📊 性能指标说明

### 基础指标

- **操作/秒 (OPS)**: 每秒完成的操作数，越高越好
- **平均延迟**: 单次操作的平均响应时间，越低越好
- **成功率**: 成功操作的百分比，应接近 100%
- **错误数**: 失败操作的总数，应接近 0

### 延迟分布

- **P50**: 50% 的操作在此时间内完成
- **P95**: 95% 的操作在此时间内完成  
- **P99**: 99% 的操作在此时间内完成

P95 和 P99 指标可以帮助识别延迟峰值和系统稳定性。

## ⚙️ API 接口

### REST API

- `GET /api/health` - 服务健康检查
- `GET /api/sessions` - 获取活跃测试会话

### WebSocket 事件

#### 客户端发送事件

- `startTest` - 开始性能测试
- `stopTest` - 停止当前测试
- `getTestStatus` - 获取测试状态

#### 服务器发送事件

- `testStarted` - 测试已开始
- `testProgress` - 测试进度更新
- `testResult` - 单个操作结果
- `testCompleted` - 测试完成
- `testError` - 测试错误
- `testStopped` - 测试已停止

## 🗂️ 项目结构

```
redis-performance-test/
├── package.json          # 项目配置和依赖
├── server.js             # Express 服务器和 WebSocket 处理
├── src/
│   └── redisTest.js      # Redis 测试核心逻辑
├── public/
│   ├── index.html        # 主页面
│   ├── style.css         # 样式文件
│   └── script.js         # 前端 JavaScript
└── README.md            # 项目文档
```

## 🔧 配置选项

### 环境变量

- `PORT` - 服务器端口 (默认: 3000)

### 测试配置限制

- 测试时长: 1-300 秒
- 并发数: 1-1000 个连接
- 键长度: 1-1024 字节
- 值大小: 1-10240 字节

## 🚨 注意事项

### 性能测试建议

1. **网络延迟**: 测试客户端和 Redis 服务器应在同一网络环境
2. **系统资源**: 确保测试机器有足够的 CPU 和内存资源
3. **Redis 配置**: 建议调整 Redis 的 `maxmemory` 和其他性能参数
4. **并发限制**: 根据系统能力合理设置并发数，避免过载

### 安全注意

- 生产环境中请设置 Redis 密码认证
- 考虑网络安全配置，限制访问 IP
- 测试数据会自动清理，但建议在专用测试环境运行

## 🤝 故障排除

### 常见问题

1. **连接 Redis 失败**
   - 检查 Redis 服务是否运行
   - 验证主机地址和端口是否正确
   - 确认密码设置是否正确

2. **测试性能异常**
   - 检查网络连接质量
   - 验证系统资源使用情况
   - 调整并发数和测试参数

3. **WebSocket 连接问题**  
   - 检查防火墙设置
   - 验证代理服务器配置
   - 确认浏览器支持 WebSocket

### 日志调试

- 浏览器控制台查看前端日志
- 服务器终端查看后端日志
- Web 界面日志面板查看测试日志

## 📝 许可证

MIT License - 详见 LICENSE 文件

## 🙋‍♂️ 支持

如果您在使用过程中遇到问题或有改进建议，欢迎提交 Issue 或 Pull Request。

---

**开始您的 Redis 性能测试之旅！** 🚀
